(function(){"use strict";var p;(function(t){t[t.Email=2]="Email",t[t.Phone=3]="Phone"})(p||(p={}));var B;(function(t){t[t.UNSET=0]="UNSET",t[t.MALE=1]="MALE",t[t.FEMALE=2]="FEMALE",t[t.OTHER=3]="OTHER"})(B||(B={}));var A;(function(t){t[t.UNSET=0]="UNSET",t[t.NEW=1]="NEW",t[t.ACTIVE=2]="ACTIVE",t[t.VERIFIED=3]="VERIFIED",t[t.BLOCKED=4]="BLOCKED"})(A||(A={}));var L;(function(t){t[t.Unset=0]="Unset",t[t.EMAIL=1]="EMAIL",t[t.PHONE=2]="PHONE",t[t.MESSENGER=3]="MESSENGER"})(L||(L={}));function $(){let t="";try{t=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t}function U(t){var n,e,i,a,o,d,m,s,y,w,c,u,l,g,b;return{customer:{id:"",login_type:t.loginType,login:(t.loginType===p.Email?t.email:t.phone)||"",status:0,settings:{language:t.language,news_enabled:!0,notification_channel:t.loginType===p.Phone?[L.PHONE]:t.loginType===p.Email?[L.EMAIL]:[],timezone:$()},contacts:{phone:t.phone||"",email:t.email||""},personal_info:{first_name:((n=t.additionalInfo)==null?void 0:n.firstName)||"",middle_name:((e=t.additionalInfo)==null?void 0:e.middleName)||"",last_name:((i=t.additionalInfo)==null?void 0:i.lastName)||"",gender:((a=t.additionalInfo)==null?void 0:a.gender)||B.UNSET,birth_date:(o=t.additionalInfo)==null?void 0:o.birthDate,personal_id:"",iban:""},operator_id:"",address:{country:((m=(d=t.additionalInfo)==null?void 0:d.address)==null?void 0:m.country)||"",region:((y=(s=t.additionalInfo)==null?void 0:s.address)==null?void 0:y.region)||"",city:((c=(w=t.additionalInfo)==null?void 0:w.address)==null?void 0:c.city)||"",home_address:((l=(u=t.additionalInfo)==null?void 0:u.address)==null?void 0:l.homeAddress)||"",zip_code:((b=(g=t.additionalInfo)==null?void 0:g.address)==null?void 0:b.zipCode)||""},is_email_confirmed:!1,is_phone_confirmed:!1,level:"",is_profile_filled:!1,registration_site_id:"",operating_region_id:t.region},currency:t.currency,promo_code:t.promoCode||"",password:t.password}}async function k(t,n){return fetch(`${t}/api/v1/site/traffic/mirrors`,{method:"POST",body:JSON.stringify({campaign_id:n})}).then(e=>e.json())}async function j(t,n){return fetch(`${t}/api/v1/site/traffic/mirrors/stats`,{method:"POST",body:JSON.stringify(n)})}async function z(t,n){return fetch(`https://${t}/api/v1/customer/signup`,{method:"POST",body:JSON.stringify(U(n))}).then(e=>e.json())}async function F(t,n){try{const e=await k(t,n),i=await W(e);if(!i)throw new Error("No available mirrors");const a=H(e,i);return await j(t,a).catch().then(()=>{const o=i[0];if(o){const d=V(e.params);return{domain:o,path:e.path,paramsString:d}}throw new Error("No available mirrors")})}catch{throw new Error("No available mirrors")}}async function W(t){if(!t||!t.domains)return null;const n=t.domains.map(e=>q(`https://${e}/x-hash-x.js`).then(i=>i.text()).then(i=>i==="4f0bf1672ff945fb7e8d6003506e0dcb21a43c33"?e:null).catch(()=>null));return Promise.all(n).then(e=>e.filter(i=>!!i)).catch(()=>[])}async function q(t){const e=new AbortController,i=setTimeout(()=>e.abort(),1e4),a=await fetch(t,{method:"GET",signal:e.signal});return clearTimeout(i),a}function H(t,n){const e=t.domains.reduce((i,a)=>(i[a]=n.includes(a),i),{});return{pool_id:t.pool_id,domains:e}}function V(t){const n=[];return Object.entries(t).forEach(([e,i])=>{n.push(`${e}=${i}`)}),n.join("&")}function R({activeDomainData:t,isError:n,refreshToken:e}){const i=J(t,e),a=t.path.replace(/\/$/,""),o=n?"/register":a;return`https://${t.domain}${o}${i}`}function J(t,n){const e=new URL(window.location.href).searchParams,o=[(n?[...Array.from(e.entries()),["refresh_token",n]]:Array.from(e.entries())).filter(([d])=>d!=="rid").map(([d,m])=>`${d}=${m}`).join("&"),t.paramsString].filter(d=>!!d).join("&");return o?`?${o}`:""}const K="https://htzbtz.cc",G="686a47af",X={ru:{registration:"Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ",login:"Ð’Ñ…Ð¾Ð´",emailPlaceholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ email",passwordPlaceholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ",registerButton:"Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ",loginButton:"Ð’Ð¾Ð¹Ñ‚Ð¸",loading:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...",waiting:"ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…...",domainLoading:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð¾Ð¼ÐµÐ½Ð°...",domainError:"ÐžÑˆÐ¸Ð±ÐºÐ°:",registrationError:"ÐžÑˆÐ¸Ð±ÐºÐ° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",domainNotLoaded:"Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾Ð¼ÐµÐ½Ð° Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",registrationSuccess:"Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð°!",emailError:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ email",passwordError:"ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 6 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²",termsError:"ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ñ€Ð¸Ð½ÑÑ‚ÑŒ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ"},en:{registration:"Registration",login:"Login",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter password",registerButton:"Register",loginButton:"Sign in",loading:"Loading...",waiting:"Waiting for data...",domainLoading:"Loading domain data...",domainError:"Error:",registrationError:"Registration error. Please try again later.",domainNotLoaded:"Domain data not loaded. Please try later.",registrationSuccess:"Registration successful!",emailError:"Enter a valid email",passwordError:"Password must contain at least 6 characters",termsError:"You must accept the terms of use"}};function Y(){return typeof navigator>"u"?"en":(navigator.language||"").toLowerCase().startsWith("ru")?"ru":"en"}function Z(){if(typeof navigator>"u")return"en";const t=(navigator.language||"").toLowerCase();return t.startsWith("tr")?"tr":t.startsWith("de")?"de":"en"}function T(){const t=Y(),n=X[t];let e=null,i=null,a=!0;const o=document.getElementById("registration-modal"),d=document.getElementById("registration-modal-backdrop"),m=document.getElementById("registration-form"),s=document.getElementById("registration-submit-btn"),y=document.getElementById("registration-domain-error"),w=document.getElementById("registration-submit-error"),c=document.getElementById("reg-email"),u=document.getElementById("reg-email-error"),l=document.getElementById("reg-password"),g=document.getElementById("reg-password-error"),b=document.getElementById("reg-terms"),v=document.getElementById("reg-terms-error"),I=document.getElementById("reg-password-toggle"),C=document.querySelectorAll(".registration-tab");function S(r){if(s)if(r==="loading")s.disabled=!0,s.textContent=n.loading;else if(r==="waiting")s.disabled=!0,s.textContent=n.waiting;else if(e){s.disabled=!1;const f=document.querySelector(".registration-tab--active"),E=f&&f.dataset.tab==="signup";s.textContent=E?n.registerButton:n.loginButton}else s.disabled=!0,s.textContent=n.domainLoading}function N(r){y&&(y.textContent=r?`${n.domainError} ${r}`:"",y.classList.toggle("hidden",!r))}function _(r){w&&(w.textContent=r||"",w.classList.toggle("hidden",!r))}function x(){u&&(u.textContent=""),g&&(g.textContent=""),v&&(v.textContent=""),_("")}async function D(){try{e=await F(K,G),i=null,N(null)}catch(r){e=null,i=r instanceof Error?r.message:String(r),N(i)}finally{a=!1,S(e?"ready":"waiting")}}function Q(){o&&(o.classList.remove("hidden"),o.setAttribute("aria-hidden","false"))}function M(){o&&(o.classList.add("hidden"),o.setAttribute("aria-hidden","true")),x()}function tt(){var h;let r=!0;const f=((h=c==null?void 0:c.value)==null?void 0:h.trim())||"",E=(l==null?void 0:l.value)||"",P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return u&&(u.textContent=""),g&&(g.textContent=""),v&&(v.textContent=""),P.test(f)||(u&&(u.textContent=n.emailError),r=!1),E.length<6&&(g&&(g.textContent=n.passwordError),r=!1),b!=null&&b.checked||(v&&(v.textContent=n.termsError),r=!1),r}async function et(r){var E;if(r.preventDefault(),!e){_(n.domainNotLoaded);return}if(!tt())return;S("loading"),_(""),x();const f={email:((E=c==null?void 0:c.value)==null?void 0:E.trim())||"",phone:null,password:(l==null?void 0:l.value)||"",currency:"EUR",language:Z(),promoCode:void 0,loginType:p.Email,region:"de"};try{const P=await z(e.domain,f),h=R({activeDomainData:e,refreshToken:P.refresh_token});h?(localStorage.setItem("was-registered","true"),window.location.href=h):(alert(n.registrationSuccess),M())}catch{if(e){const h=R({activeDomainData:e,isError:!0});if(h){window.location.href=h;return}}_(n.registrationError),S("ready")}}d&&d.addEventListener("click",M),m&&m.addEventListener("submit",et),I&&l&&I.addEventListener("click",()=>{const r=l.type;l.type=r==="password"?"text":"password",I.textContent=r==="password"?"ðŸ™ˆ":"ðŸ‘ï¸",I.setAttribute("aria-label",r==="password"?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ":"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ")}),C.forEach(r=>{r.addEventListener("click",()=>{C.forEach(E=>E.classList.remove("registration-tab--active")),r.classList.add("registration-tab--active");const f=r.dataset.tab==="signup";s&&e&&(s.textContent=f?n.registerButton:n.loginButton)})});const O=document.querySelector(".scratch-result-cta");O&&O.addEventListener("click",Q),S(a?"loading":e?"ready":"waiting"),D()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",T):T()})();
